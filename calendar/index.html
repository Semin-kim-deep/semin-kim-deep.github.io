<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Calendar - Songs & Scenes</title>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Pretendard', sans-serif;
            color: #404040;
            background-color: white;
        }
        body {
            display: flex;
            flex-direction: column;
        }
        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 28px;
            width: 100%;
            box-sizing: border-box;
        }
        .header-title {
            font-family: 'Jost', sans-serif;
            font-weight: 700;
            color: black;
            margin: 0;
            text-align: center;
            flex-grow: 1;
            flex: 1 1 auto;
            text-align: center;
        }
        .header-left, .header-right {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
        }
        .subpc {
            display: block;
            font-size: 14pt;
        }
        .subm {
            display: none;
        }
        .mobile-title {
            display: none;
        }
        .pc-title {
            display: block;
            font-size: 36pt;
        }
        .hamburger {
            width: 18px;
            height: 16px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            margin-top: 10px;
        }
        .hamburger span {
            width: 100%;
            height: 2px;
            background-color: #7f7f7f;
        }
        .subtitle {
            font-size: 13pt;
            text-align: center;
            max-width: 1000px;
            line-height: 1.4;
            padding-bottom: 0px;
            color: black;
        }
        .subsub {
            font-size: 12pt;
            text-align: center;
            max-width: 1000px;
            line-height: 1.4;
            padding-top: 20px;
            padding-bottom: 20px;
            color: #404040;
        }
        .subsub-pc {
            font-size: 12pt;
        }
        .subsub-m {
            display: none;
        }
        .autoplay-info {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 5px;
        }
        
        /* Calendar Container with Instagram-style Features */
        .calendar-container {
            position: relative;
            width: 1220px;
            margin-top: 20px;
            margin-bottom: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .calendar-content {
            display: flex;
            width: 1120px;
            height: 560px;
            position: relative;
            overflow: hidden;
        }
        .image-container {
            width: 560px;
            height: 560px;
            position: relative;
            overflow: hidden;
        }
        .swipe-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: translateX(0);
            transition: transform 0.3s ease-out;
            opacity: 1;
            object-fit: cover;
            will-change: transform;
        }
        .swipe-image.next {
            transform: translateX(100%);
        }

        /* Dots Indicator */
        .dots-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 8px 0;
        }
        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #B2B2B2;
            margin: 0 2px;
            transition: all 0.3s ease;
        }
        .dot.active {
            background-color: #0095F6;
        }

        .text-content {
            width: 560px;
            height: 560px;
            padding: 0 0 0 40px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }
        .text-content-inner {
            border-top: 2px solid #000;
            border-bottom: 1px solid #000;
            padding: 20px 0;
            font-size: 14pt;
            flex-grow: 1;
            overflow-y: auto;
            line-height: 1.8;
        }
        .text-content-inner b {
            font-size: 15pt;
            line-height: 1.8;
            color: #202020;
        }

        /* Navigation Buttons */
        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #404040;
            font-size: 40.56px;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
        .nav-button::before {
            content: '';
            display: inline-block;
            width: 0.52em;
            height: 0.52em;
            border-top: 1px solid currentColor;
            border-right: 1px solid currentColor;
            position: absolute;
        }
        .nav-button.prev {
            left: 0;
        }
        .nav-button.next {
            right: 0;
        }
        .nav-button.prev::before {
            transform: rotate(-135deg);
        }
        .nav-button.next::before {
            transform: rotate(45deg);
        }

        /* Existing video container styles */
        .video-container {
            width: 560px;
            height: 315px;
            position: relative;
            margin: 0 0 16px 0;
        }
        .video-container iframe {
            width: 100%;
            height: 100%;
        }

        /* Bottom section styles */
        .bottom-section {
            width: 100%;
            background-color: #f1f1f1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 0;
        }
        .white-section {
            width: 100%;
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 100px 0;
        }
        .white-section .normalt {
            font-size: 14pt;
            text-align: center;
            max-width: 1000px;
            line-height: 1.9;
            padding-top: 20px;
            color: #404040;
        }

        /* Menu styles */
        .menu-items {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background-color: #f5f3f2;
            transition: left 0.3s ease-in-out;
            padding: 40px;
            box-sizing: border-box;
            z-index: 1001;
            text-align: center;
        }
        .menu-items a {
            display: block;
            padding: 10px 0;
            text-decoration: none;
            color: #414141;
            font-family: 'Jost', sans-serif;
            font-size: 15px;
            font-weight: 700;
        }
        .menu-open {
            left: 0;
        }
        .dimmed-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 1000;
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .calendar-container {
                width: 100%;
                margin-top: 10px;
            }
            .calendar-content {
                width: 100%;
                flex-direction: column;
                height: auto;
            }
            .image-container {
                width: 100%;
                padding-bottom: 100%;
                height: 0;
            }
            .swipe-image {
                object-fit: cover;
                object-position: center;
            }
            .text-content {
                width: 100%;
                height: auto;
                padding: 20px;
            }
            .dots-indicator {
                margin-top: 10px;
                bottom: -25px;
            }
            .nav-button {
                top: 25%;
            }
            .nav-button.prev {
                left: 10px;
            }
            .nav-button.next {
                right: 10px;
            }
            .pc-title {
                display: none;
            }
            .mobile-title {
                display: flex;
                flex-direction: column;
                align-items: center;
                font-size: 26.4px;
                line-height: 1.2;
            }
            .subtitle {
                font-size: 19.6px;
                font-weight: bold;
                padding-top: 10px;
            }
            .subpc {
                display: none;
            }
            .subm {
                display: inline-block;
                padding: 4px;
                flex-direction: column;
                font-size: 14pt;
                line-height: 1.4;
            }
            .subsub-pc {
                display: none;
            }
            .subsub-m {
                display: block;
                font-size: 13.5pt;
                line-height: 1.4;
                padding: 0 15px;
            }
            .hamburger {
                position: absolute;
                left: 20px;
                top: 40px;
                transform: translateY(-50%);
                margin-top: 0;
            }
            .header-title {
                font-size: 26.4px;
            }
            .video-container {
                width: 90%;
                height: 0;
                padding-bottom: 56.25%;
                position: relative;
            }
            .video-container iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
        }

        @media (min-width: 1920px) {
            header {
                padding-left: 56px;
                padding-right: 56px;
            }
        }


        .button-container {
            margin-top: 50px;
        }
        .custom-button {
            width: 600px;
            height: 60px;
            background-color: transparent;
            border: 1px solid #000;
            font-family: 'Jost', sans-serif;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
        }
        .custom-button-content {
            display: flex;
            align-items: center;
        }
        .custom-button-arrow {
            width: 8px;
            height: 8px;
            border-top: 1px solid #000;
            border-right: 1px solid #000;
            transform: rotate(45deg);
            margin-left: 10px;
            transition: border-color 0.3s;
        }
        .custom-button:hover {
            background-color: #000;
            color: #fff;
        }
        .custom-button:hover .custom-button-arrow {
            border-color: #fff;
        }
        .custom-button a {
            color: inherit;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        .custom-button:hover a {
            color: #fff;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 18px;
            cursor: pointer;
            width: 18px;
            height: 18px;
            line-height: 18px;
            text-align: center;
            color: #414141;
        }
        .close-btn::before,
        .close-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: #414141;
        }
        .close-btn::before {
            transform: rotate(45deg);
        }
        .close-btn::after {
            transform: rotate(-45deg);
        }
        .menu-title {
            font-family: 'Jost', sans-serif;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 24px;
            color: black;
        }
        .autoplay-toggle {
            display: flex;
            align-items: center;
            margin-right: 10px;
            cursor: pointer;
            font-size: 24px;
            color: #7f7f7f;
        }
        .autoplay-status {
            font-size: 12px;
            margin-left: 5px;
        }
        .autoplay-toggle.active {
            color: red;
        }
        .autoplay-toggle.active .autoplay-status {
            color: red;
        }
        .autoplay-text {
            font-size: 11pt;
            color: #404040;
        }
        .top-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: #ffffff;
            border: 1px solid #8a8a8a;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
        }
        .top-button::before {
            content: '';
            width: 10px;
            height: 10px;
            border-top: 1px solid #404040;
            border-right: 1px solid #404040;
            transform: rotate(-45deg);
            margin-top: 4px;
        }
        .language-toggle {
            font-family: 'Pretendard', sans-serif;
            font-weight: 400;
            font-size: 12pt;
            color: #404040;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            margin-top: 10px;
        }

        .play-this-song {
            font-family: 'Jost', sans-serif;
            font-weight: 700;
            font-size: 30px;
            text-align: center;
            margin-bottom: 40px;
        }
        
        @media (max-width: 768px) {
            .button-container {
                display: flex;
                justify-content: center;
                width: 100%;
            }
            .custom-button {
                width: 80%;
                height: 50px;
                font-size: 16px;
                margin: 0 auto;
            }
            .language-toggle {
                position: absolute;
                right: 20px;
                top: 40px;
                transform: translateY(-50%);
                margin-top: 0;
            }
            .autoplay-info {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="dimmed-background" id="dimmed-bg"></div>
    <div class="content">
        <header class="header">
            <div class="header-left">
                <div class="hamburger" id="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <h1 class="header-title">
                <span class="pc-title">2025 Calendar - Songs & Scenes</span>
                <span class="mobile-title">
                    <span class="title-year">2025 Calendar</span>
                </span>
            </h1>
            <div class="header-right">
                <button class="language-toggle" id="language-toggle">EN</button>
            </div>
        </header>
        
        <div class="menu-items" id="menu-items">
            <div class="close-btn" id="close-menu"></div>
            <div class="menu-title">Deepdown Studio</div>
            <a href="/">Home</a>
            <a href="/about.html">About</a>
            <a href="https://smartstore.naver.com/deepdown-studio/" target="blank">Shop</a>
            <a href="/card/index.html">Anti-Tarot Card</a>
            <a href="/calendar/">Calendar 2025</a>
        </div>

        <div class="subtitle">
            <span class="subpc">2025년의 시간을 팝니다.</span>
            <span class="subm">
            Songs & Scenes<br>
            2025년의 시간을 팝니다.</span>
        </div>

        <div class="subsub">
           <span class="subsub-pc">월별 어울리는 음악을 선정하고 장면을 그렸어요. 여러분의 월별 플레이리스트는 어떤가요?<br></span>    
           <span class="subsub-m">월별 어울리는 음악을 선정하고 장면을 그렸어요. <br> 여러분의 월별 플레이리스트는 어떤가요?<br></span>
            <div class="autoplay-info">
                <span class="autoplay-toggle" id="autoplay-toggle">
                    <i class="far fa-play-circle"></i>
                    <span class="autoplay-status">OFF</span>
                </span>
                <span class="autoplay-text">음악 영상(유튜브)를 자동재생하려면 버튼을 선택하세요</span>
            </div>
        </div>

        <div class="calendar-container">
            <button class="nav-button prev" id="prevButton"></button>
            <div class="calendar-content">
                <div class="image-container">
                    <img id="calendarImage1" class="swipe-image" src="images/2025_square1.jpg" alt="2025 Calendar Image">
                    <img id="calendarImage2" class="swipe-image next" src="" alt="2025 Calendar Image">
                </div>
                <div class="text-content">
                    <div class="text-content-inner" id="calendarText"></div>
                </div>
            </div>
            <div class="dots-indicator">
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <button class="nav-button next" id="nextButton"></button>
        </div>
    </div>

    <div class="bottom-section">
        <div class="play-this-song">Play This Song</div>
        <div class="video-container">
            <iframe id="youtubeVideo"
                src="https://www.youtube.com/embed/Ed1swjoTXqc"
                frameborder="0"
                allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; autoplay"
                allowfullscreen>
            </iframe>
        </div>
    </div>

    <div class="white-section">
        <img id="bottomImage" src="images/1.jpg" alt="Calendar Image" class="image-1">
        <div class="normalt">
            <br><b>9X13cm 탁상용 달력(나무홀더 포함) <br></b>
            그림이 잘보이도록 스프링을 사용하지 않았어요. <br>
            잠시 시야에 그림을 투입하여 머리 속 휴식을 주세요.
        </div>
        <div class="button-container">
            <button class="custom-button">
                <a href="https://smartstore.naver.com/deepdown-studio/products/11025811769" target="blank">
                    <span class="custom-button-content">
                        신나게 사러 달려나가기
                        <span class="custom-button-arrow"></span>
                    </span>
                </a>
            </button>
        </div>
    </div>

    <div class="top-button" id="topButton"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-menu');
            const menuItems = document.getElementById('menu-items');
            const closeBtn = document.getElementById('close-menu');
            const dimmedBg = document.getElementById('dimmed-bg');
            const autoplayToggle = document.getElementById('autoplay-toggle');
            const iframe = document.querySelector('.video-container iframe');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const calendarImage1 = document.getElementById('calendarImage1');
            const calendarImage2 = document.getElementById('calendarImage2');
            const calendarText = document.getElementById('calendarText');
            const youtubeVideo = document.getElementById('youtubeVideo');
            const bottomImage = document.getElementById('bottomImage');
            const languageToggle = document.getElementById('language-toggle');
            const imageContainer = document.querySelector('.image-container');
            const dots = document.querySelectorAll('.dot');

            let isAutoplayOn = false;
            let currentMonth = 1;
            let activeImage = 1;
            let isTransitioning = false;
            let touchStartX = 0;
            let touchEndX = 0;
            let currentTranslateX = 0;
            const imageCache = {};
            let currentLanguage = 'ko';

            const translations = {
                ko: {
                    title: '2025 Calendar - Songs & Scenes',
                    subtitle: '2025년의 시간을 팝니다.',
                    subsubtitle: '월별 어울리는 음악을 선정하고 장면을 그렸어요. 여러분의 월별 플레이리스트는 어떤가요?',
                    autoplayText: '음악 영상(유튜브)를 자동재생하려면 버튼을 선택하세요',
                    playThisSong: 'Play This Song',
                    bottomText: '9X13cm 탁상용 달력(나무홀더 포함)<br>그림이 잘보이도록 스프링을 사용하지 않았어요.<br>잠시 시야에 그림을 투입하여 머리 속 휴식을 주세요.',
                    buttonText: '신나게 사러 달려나가기',
                    menuHome: 'Home',
                    menuAbout: 'About',
                    menuShop: 'Shop',
                    menuCard: 'Anti-Tarot Card',
                    menuCalendar: 'Calendar 2025'
                },
                en: {
                    title: '2025 Calendar - Songs & Scenes',
                    subtitle: "Selling the time of 2025.",
                    subsubtitle: "We've selected music that fits each month and drawn scenes. What's your monthly playlist like?",
                    autoplayText: 'Select the button to autoplay music videos (YouTube)',
                    playThisSong: 'Play This Song',
                    bottomText: '9X13cm Desk Calendar(+ wooden holder)<br>No coil biding so the pictures are clearly visible.<br>Take a mental break by inserting these images into your field of vision for a moment.',
                    buttonText: 'Run excitedly to buy',
                    menuHome: 'Home',
                    menuAbout: 'About',
                    menuShop: 'Shop',
                    menuCard: 'Anti-Tarot Card',
                    menuCalendar: 'Calendar 2025'
                }
            };

            // Monthly content arrays (ko and en) remain the same as in your original code
            const monthlyContent = {
                ko: [
                    // Your existing Korean monthly content array
                ],
                en: [
                    // Your existing English monthly content array
                ]
            };

            const youtubeIDs = [
                "Ed1swjoTXqc", // 1월
                "0GeeWwgdRoM",  // 2월
                "n50Z3HGj4QE",  // 3월
                "ir4GpOqRkQg",  // 4월
                "roPQ_M3yJTA",  // 5월
                "mzJj5-lubeM",  // 6월
                "GxTqqjJWGpc",  // 7월
                "_pmZKkb_UAg",  // 8월
                "tNDWJ_KDkAc",  // 9월
                "fV4DiAyExN0",  // 10월
                "a4g5MeonGYM",  // 11월
                "qBgbiZnhly4",  // 12월
            ];

            function isMobile() {
                return window.innerWidth <= 768;
            }

            function updateDots(month) {
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === month - 1);
                });
            }

            function openMenu() {
                menuItems.classList.add('menu-open');
                dimmedBg.style.display = 'block';
            }

            function closeMenu() {
                menuItems.classList.remove('menu-open');
                dimmedBg.style.display = 'none';
            }

            function toggleAutoplay() {
                isAutoplayOn = !isAutoplayOn;
                autoplayToggle.classList.toggle('active');
                const statusElement = autoplayToggle.querySelector('.autoplay-status');
               
                if (isAutoplayOn) {
                    autoplayToggle.querySelector('i').className = 'fas fa-play-circle';
                    statusElement.textContent = 'ON';
                    statusElement.style.color = 'red';
                } else {
                    autoplayToggle.querySelector('i').className = 'far fa-play-circle';
                    statusElement.textContent = 'OFF';
                    statusElement.style.color = '#7f7f7f';
                }
               
                updateYoutubeAutoplay();
            }

            function updateYoutubeAutoplay() {
                let src = youtubeVideo.src;
                src = src.replace(/(\?|&)autoplay=[01]/, '');
                if (isAutoplayOn) {
                    src += (src.includes('?') ? '&' : '?') + 'autoplay=1';
                }
                youtubeVideo.src = src;
            }

            function preloadImage(src) {
                return new Promise((resolve, reject) => {
                    if (imageCache[src]) {
                        resolve(imageCache[src]);
                    } else {
                        const img = new Image();
                        img.onload = () => {
                            imageCache[src] = img;
                            resolve(img);
                        };
                        img.onerror = reject;
                        img.src = src;
                    }
                });
            }

            async function updateContent(month, direction) {
                if (isTransitioning) return;
                isTransitioning = true;

                const nextImage = activeImage === 1 ? calendarImage2 : calendarImage1;
                const currentImage = activeImage === 1 ? calendarImage1 : calendarImage2;
               
                const nextImageSrc = `images/2025_square${month}.jpg`;
               
                try {
                    await preloadImage(nextImageSrc);
                   
                    nextImage.src = nextImageSrc;
                    nextImage.style.display = 'block';
                    currentImage.style.display = 'block';

                    if (direction) {
                        nextImage.style.transition = 'none';
                        nextImage.style.transform = `translateX(${direction === 'next' ? '100%' : '-100%'})`;
                       
                        requestAnimationFrame(() => {
                            nextImage.style.transition = 'transform 0.3s ease-out';
                            currentImage.style.transition = 'transform 0.3s ease-out';
                           
                            nextImage.style.transform = 'translateX(0)';
                            currentImage.style.transform = `translateX(${direction === 'next' ? '-100%' : '100%'})`;
                        });
                    }

                    updateDots(month);
                   
                    setTimeout(() => {
                        if (direction) {
                            currentImage.style.display = 'none';
                            currentImage.style.transition = 'none';
                        }
                       
                        activeImage = activeImage === 1 ? 2 : 1;
                        isTransitioning = false;
                    }, 300);

                    bottomImage.src = isMobile() ? `images/${month}m.jpg` : `images/${month}.jpg`;
                    calendarText.innerHTML = monthlyContent[currentLanguage][month - 1];
                    youtubeVideo.src = `https://www.youtube.com/embed/${youtubeIDs[month - 1]}`;
                    updateYoutubeAutoplay();
                } catch (error) {
                    console.error('Failed to load image:', error);
                    isTransitioning = false;
                }
            }

            function handleTouchStart(e) {
                if (isTransitioning) return;
                touchStartX = e.touches[0].clientX;
                currentTranslateX = 0;
                
                const activeImg = activeImage === 1 ? calendarImage1 : calendarImage2;
                const nextImg = activeImage === 1 ? calendarImage2 : calendarImage1;
                
                activeImg.style.transition = 'none';
                nextImg.style.transition = 'none';
            }

            function handleTouchMove(e) {
                if (isTransitioning) return;
                
                touchEndX = e.touches[0].clientX;
                currentTranslateX = touchEndX - touchStartX;
                
                const activeImg = activeImage === 1 ? calendarImage1 : calendarImage2;
                const nextImg = activeImage === 1 ? calendarImage2 : calendarImage1;
                
                const translateX = (currentTranslateX / window.innerWidth) * 100;
                
                if ((currentMonth === 1 && translateX > 0) || (currentMonth === 12 && translateX < 0)) {
                    return;
                }
                
                activeImg.style.transform = `translateX(${translateX}%)`;
                nextImg.style.transform = `translateX(${translateX + (currentTranslateX < 0 ? 100 : -100)}%)`;
            }

            function handleTouchEnd() {
                if (isTransitioning) return;
                
                const swipeThreshold = 50;
                const swipeDistance = touchStartX - touchEndX;
                
                if (Math.abs(swipeDistance) > swipeThreshold) {
                    if (swipeDistance > 0 && currentMonth < 12) {
                        showNextMonth();
                    } else if (swipeDistance < 0 && currentMonth > 1) {
                        showPreviousMonth();
                    } else {
                        resetImagesPosition();
                    }
                } else {
                    resetImagesPosition();
                }
            }

            function resetImagesPosition() {
                const activeImg = activeImage === 1 ? calendarImage1 : calendarImage2;
                const nextImg = activeImage === 1 ? calendarImage2 : calendarImage1;
                
                activeImg.style.transition = 'transform 0.3s ease-out';
                nextImg.style.transition = 'transform 0.3s ease-out';
                
                activeImg.style.transform = 'translateX(0)';
                nextImg.style.transform = 'translateX(100%)';
            }

            function showNextMonth() {
                if (currentMonth < 12) {
                    currentMonth++;
                    updateContent(currentMonth, 'next');
                }
            }

            function showPreviousMonth() {
                if (currentMonth > 1) {
                    currentMonth--;
                    updateContent(currentMonth, 'prev');
                }
            }

            function changeLanguage() {
                currentLanguage = currentLanguage === 'ko' ? 'en' : 'ko';
                languageToggle.textContent = currentLanguage === 'ko' ? 'EN' : 'KO';
                
                document.querySelector('.pc-title').textContent = translations[currentLanguage].title;
                document.querySelector('.subpc').textContent = translations[currentLanguage].subtitle;
                document.querySelector('.subsub-pc').textContent = translations[currentLanguage].subsubtitle;
                document.querySelector('.subsub-m').textContent = translations[currentLanguage].subsubtitle;
                document.querySelector('.autoplay-text').textContent = translations[currentLanguage].autoplayText;
                document.querySelector('.play-this-song').textContent = translations[currentLanguage].playThisSong;
                document.querySelector('.normalt').innerHTML = translations[currentLanguage].bottomText;
                document.querySelector('.custom-button .custom-button-content').firstChild.textContent = translations[currentLanguage].buttonText;

                calendarText.innerHTML = monthlyContent[currentLanguage][currentMonth - 1];
            }

            // Event Listeners
            hamburger.addEventListener('click', openMenu);
            closeBtn.addEventListener('click', closeMenu);
            dimmedBg.addEventListener('click', closeMenu);
            autoplayToggle.addEventListener('click', toggleAutoplay);
            nextButton.addEventListener('click', showNextMonth);
            prevButton.addEventListener('click', showPreviousMonth);
            languageToggle.addEventListener('click', changeLanguage);

            // Touch Event Listeners
            imageContainer.addEventListener('touchstart', handleTouchStart, { passive: true });
            imageContainer.addEventListener('touchmove', handleTouchMove, { passive: true });
            imageContainer.addEventListener('touchend', handleTouchEnd);

            // Top Button
            const topButton = document.getElementById('topButton');
            topButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 100) {
                    topButton.style.display = 'flex';
                } else {
                    topButton.style.display = 'none';
                }
            });

            // Initialize content
            updateContent(1);

            // Window resize handler
            window.addEventListener('resize', () => {
                bottomImage.src = isMobile() ? `images/${currentMonth}m.jpg` : `images/${currentMonth}.jpg`;
            });
        });
    </script>
</body>
</html>
